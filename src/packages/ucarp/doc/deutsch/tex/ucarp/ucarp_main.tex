% Last Update: $Id$
\marklabel{sec:opt-ucarp}
{
\section {OPT\_UCARP}
}

UCARP ist eine freie Userland-Portierung des Common Adress Redundancy Protocols
(CARP). Entwickelt wurde CARP vom OpenBSD-Team.

Um UCARP zu nutzen, braucht man mindestens zwei Systeme. Diese Systeme bekommen
jeweils eine eindeutige IP-Adresse. Zusätzlich wird eine virtuelle IP-Adresse
definiert. Eines der Systeme wird Master und die anderen Slaves. Dem Master
wird die virtuelle IP-Adresse zugeordnet. Fällt der Master aus wird einer der
Slaves zum Master.
Die virtuelle IP-Adresse wird im Netzwerk als Gateway genutzt.

Auf dem fli4l werden die UCARP-Instanzen durch ein IP-UP-Script gestartet und
durch ein IP-Down-Script wieder beendet. Dadurch wird nicht nur der Ausfall des
Routers sondern auch der Ausfall der Internetverbindung abgefangen.

\subsection{Konfiguration}

\begin{description}

\config{OPT\_UCARP}{OPT\_UCARP}{OPTUCARP}
'yes' aktiviert das Paket.

\config{UCARP\_N}{UCARP\_N}{UCARPN}
Anzahl der UCARP-Instanzen.

\config{UCARP\_x\_INTERFACE}{UCARP\_x\_INTERFACE}{UCARPxINTERFACE}
Das Interface auf dem die UCARP-Instanzen gebunden werden soll
(z.B. eth0, br0, eth0.7).

\config{UCARP\_x\_SRCIP}{UCARP\_x\_SRCIP}{UCARPxSRCIP}
Die reale IP-Adresse und die Netzmaske in CIDR (Classless Inter-Domain Routing)
Schreibweise die auf UCARP\_x\_INTERFACE gesetzt ist (z.B. 192.168.6.1/24)

\config{UCARP\_x\_ADDR}{UCARP\_x\_ADDR}{UCARPxADDR}
Die virtuelle IP-Adresse und die Netzmaske in CIDR (Classless Inter-Domain
Routing) Schreibweise (z.B. 192.168.6.10/24)

\config{UCARP\_x\_PASS}{UCARP\_x\_PASS}{UCARPxPASS}
Das Passwort, mit dem diese UCARP-Instanz verschlüsselt wird.

\config{UCARP\_x\_PREEMPT}{UCARP\_x\_PREEMPT}{UCARPxPREEMPT}
Diese Angabe ist optional und kann komplett weggelassen werden.
Mit 'yes' wird dieser Router so schnell wie möglich Master.

\config{UCARP\_x\_ADVSKEW}{UCARP\_x\_ADVSKEW}{UCARPxADVSKEW}
Diese Angabe ist optional und kann komplett weggelassen werden.
Durch diese Einstellung kann der Master festgelegt werden. Je höher der Wert
ist, desto geringer ist seine Berechtigung, die Rolle vom Masterhost
einzunehmen. Gültige Werte sind 0 bis 254. Der Standardwert ist 0.
\end{description}
